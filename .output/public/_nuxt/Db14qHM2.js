import{_ as h}from"./Csxt4HGg.js";import{a4 as v,r as d,o as y,x as m,y as t,R as b,T as p,U as x,L as l,M as g,z as L,S as I,A as S,v as w,m as j}from"./JqZd4KxG.js";import{u as A}from"./C-5zPJiT.js";import{u as U}from"./BcTueDZh.js";import"./IShi1APO.js";const V={class:"w-full h-full flex items-center justify-center"},M={class:"md:h-[40%] w-full h-full md:w-[40%] flex max-md:flex-col-reverse max-md:justify-end items-center justify-center bg-white rounded-xl shadow-[0px_0px_24px_0px_rgb(0,0,0,0.2)] overflow-hidden"},N={class:"flex flex-col items-center justify-center px-8 md:px-36 py-16"},T={class:"flex flex-col items-start justify-center flex-grow"},k={class:"mb-2"},B={key:0,style:{color:"red"}},C={class:"flex items-center justify-center md:h-full w-full md:flex-grow px-8 py-8 text-white font-bold border border-gray-300 bg-gradient-to-r from-[#6e7af8] from-5% via-[#6c56e4] via-30% to-[#842ff7] to-80% transition duration-300 text-2xl"},F={__name:"index",async setup(E){let u,c;const r=A();[u,c]=v(()=>r.fetchUser()),await u,c();const n=d(""),a=d(""),o=d(null);y(async()=>{await r.isLoggedIn()&&(window.location.href="/")});const _=async()=>{o.value=null;try{const{data:s,error:e}=await U("/api/auth/login",{method:"POST",body:{username:n.value,password:a.value},credentials:"include"},"$iX10IJN3fa");if(e.value){o.value=e.value.data.error;return}if(await r.fetchUser(),await r.isLoggedIn())j("/");else throw new Error("ユーザー名またはパスワードが異なります")}catch(s){o.value=s.message?s.message:"An error occurred"}};return(s,e)=>{const f=h;return w(),m("div",V,[t("div",M,[t("div",N,[t("div",T,[e[3]||(e[3]=t("h1",{class:"border-l-2 border-[#842ff7] px-2 text-2xl mb-4"}," Login ",-1)),t("form",{onSubmit:b(_,["prevent"]),class:"text-base"},[t("div",k,[p(t("input",{"onUpdate:modelValue":e[0]||(e[0]=i=>g(n)?n.value=i:null),placeholder:"Username",required:"",class:"outline-none"},null,512),[[x,l(n)]])]),t("div",null,[p(t("input",{type:"password","onUpdate:modelValue":e[1]||(e[1]=i=>g(a)?a.value=i:null),placeholder:"Password",required:"",class:"outline-none"},null,512),[[x,l(a)]])]),e[2]||(e[2]=t("button",{type:"submit",class:"bg-[#6e7af8] border border-gray-200 rounded-lg text-white text-lg px-3 py-1 w-full mt-4"},"Login",-1))],32),l(o)?(w(),m("p",B,L(l(o)),1)):I("",!0)]),e[4]||(e[4]=t("a",{href:"/signup",class:"mt-4"},[t("p",{class:"text-gray-500 underline"}," 登録はこちら ")],-1))]),t("div",C,[S(f)])])])}}};export{F as default};
