import{_ as K,a as Ie,u as A,b as Z,c as q,d as T,e as Y,f as $e,g as ne}from"./DfE0G0pJ.js";import{d as $,r as k,o as W,F as B,v as i,K as O,B as g,A as u,y as e,z as S,L as n,M as D,N as _e,g as C,x as a,O as M,P as F,Q as j,R as le,S as b,T as I,U as V,i as L,e as se,V as P,W as ie,C as R,X as H,t as ke,Y as N,Z as je,$ as Se,a0 as Me,a1 as Ce,a2 as te,a3 as re,a4 as Ve}from"./JqZd4KxG.js";import{u as E}from"./D-sMymdb.js";import{v as ae}from"./DvF23Exx.js";import{_ as de}from"./BcW51KGl.js";import{_ as Ae}from"./BC30jlDP.js";import{u as Ee}from"./C-5zPJiT.js";import"./BcTueDZh.js";import"./IShi1APO.js";const Fe={class:"bg-white flex flex-col rounded-xl text-sm scale-90 hover:scale-100 transition-all duration-200"},Re={class:"flex items-center justify-center p-2"},Oe={class:"w-6 aspect-square rounded-lg overflow-hidden"},Te={class:"flex-grow ml-2"},Ue=$({__name:"flow-view",props:{flowItem:{type:Object,required:!0}},setup(t){const l=E(),r=t,s=k(50),o=k([]);function y(f="Untitled",d){const v=ae();s.value+=100,o.value.push({id:v,position:{x:150,y:s.value},type:"custom",data:{label:`${f}`,flowItem:d}})}function m(){for(const f of r.flowItem.flowItems)console.log(f.flowItems.length),y(f.name,f)}return W(()=>{m()}),B(l.masterFlow,()=>{s.value=50,o.value=[],m()}),(f,d)=>{const v=K,h=Ie;return i(),O(h,null,{default:g(()=>[u(n(_e),{modelValue:n(o),"onUpdate:modelValue":d[0]||(d[0]=p=>D(o)?o.value=p:null)},{"node-custom":g(p=>[e("div",Fe,[e("div",Re,[e("div",Oe,[u(v,{size:"small","item-type":p.data.flowItem.type,class:"h-full"},null,8,["item-type"])]),e("p",Te,S(p.data.flowItem.name?p.data.flowItem.name:"Untitled"),1)])])]),_:1},8,["modelValue"])]),_:1})}}}),Be=["href"],De=["onClick"],Le={class:"flex flex-col items-start justify-center w-full ml-1"},Pe={class:"flex items-center justify-center w-full pt-1"},Ne={key:0,class:"flex flex-col items-center justify-center"},ze={key:1,class:"flex flex-col items-center justify-center"},qe={class:"flex items-center justify-start flex-grow"},We=["onUpdate:modelValue"],Je={class:"rounded-md mr-1 hover:bg-gray-200 px-1 transition-all duration-150"},Ge=["onClick"],He=["onClick"],ue=$({__name:"draggable-flow-list",props:{flowItem:{type:Object,required:!0}},setup(t){const l=A(),r=E(),s=k(null);function o(){s.value&&(console.log(JSON.stringify(s.value)),s.value.changeVisibility())}return(y,m)=>{const f=K,d=C("font-awesome-icon"),v=Z,h=q,p=ue,w=C("draggable");return i(),O(w,{ref:"el",modelValue:t.flowItem.flowItems,"onUpdate:modelValue":m[0]||(m[0]=x=>t.flowItem.flowItems=x),animation:150,easing:"ease",group:"flow",ghostClass:"ghost",swapThreshold:.1,class:"my-[1px] w-full flex flex-col items-center justify-center"},{default:g(()=>[(i(!0),a(M,null,F(t.flowItem.flowItems,(x,c)=>(i(),a("a",{key:t.flowItem.id,href:"#dynmcwrpr_"+x.id,class:"flex w-full mb-[2px]"},[e("div",{class:j(["flex rounded-lg w-full overflow-hidden pr-1 transition-all duration-150",[n(l).focusedItemId===x.id?"border-2 border-blue-500":"border border-gray-200",x.isItemActive?"bg-white":"bg-gray-300"]]),onClick:le(U=>n(l).setFocusedItemId(x.id),["stop"])},[u(f,{"item-type":x.type,size:"small"},null,8,["item-type"]),e("div",Le,[e("div",Pe,[n(l).getIsExecutedFlow(x.id)==="Done"&&x.type==="api"?(i(),a("div",Ne,[n(l).getExecutionResults(x.id)[n(l).getExecutionResults(x.id).length-1]?.success?(i(),O(d,{key:0,icon:["fas","circle-check"],class:"text-green-600"})):b("",!0),n(l).getExecutionResults(x.id)[n(l).getExecutionResults(x.id).length-1]?.success?b("",!0):(i(),O(d,{key:1,icon:["fas","circle-exclamation"],class:"text-red-600"}))])):n(l).getIsExecutedFlow(x.id)==="In progress"?(i(),a("div",ze,m[1]||(m[1]=[e("div",{class:"flex items-center justify-center"},[e("div",{class:"animate-spin rounded-full h-2 w-2 border-b-2 border-green-500"})],-1)]))):b("",!0),e("div",qe,[I(e("input",{"onUpdate:modelValue":U=>x.name=U,type:"text",placeholder:"Untitled",class:"px-2 focus:bg-white duration-300 transition-all bg-transparent rounded-md border-gray-300 outline-none w-full"},null,8,We),[[V,x.name]])]),u(h,{ref_for:!0,ref_key:"modalButton",ref:s},{button:g(()=>[e("button",Je,[u(d,{icon:["fas","plus"],class:""})])]),modal:g(()=>[u(v,{"flow-item":x,onClick:o},null,8,["flow-item"])]),_:2},1536),e("button",{class:"flex items-center justify-center mr-1 hover:bg-gray-200 p-1 rounded-md transition-all duration-150",onClick:U=>n(r).duplicateFlowItem(t.flowItem,x)},[u(d,{icon:["far","clone"]})],8,Ge),e("button",{onClick:U=>n(r).removeFlowItemById(x.id),class:"flex items-center justify-center text-red-500 hover:text-red-700 mr-4 hover:bg-gray-200 p-1 rounded-md transition-all duration-150"},[u(d,{icon:["fas","xmark"]})],8,He)]),u(p,{"flow-item":x},null,8,["flow-item"])])],10,De)],8,Be))),128))]),_:1},8,["modelValue"])}}}),Ke=["id"],J=$({__name:"dynamic-size-wrapper",props:{idName:{type:String,default:""}},setup(t){const l=t;L(()=>{try{return document.getElementById(l.idName).clientHeight}catch{return 0}});const r=k(0),s=k(),o=()=>{try{r.value=document.getElementById(l.idName).clientHeight}catch{return[]}};return W(()=>{s.value=new ResizeObserver(m=>{for(let f of m)o()});const y=document.getElementById(l.idName);try{s.value.observe(y)}catch{}}),se(()=>{s.value&&s.value.disconnect()}),(y,m)=>(i(),a("div",{class:"transition-all duration-150 overflow-hidden",style:ie({height:n(r)+"px"})},[e("div",{id:t.idName,class:"flex"},[P(y.$slots,"default")],8,Ke)],4))}}),Ze={class:"w-full h-fit py-4 px-4 flex flex-col justify-start items-center"},Ye={class:"w-full flex flex-col items-start justify-center"},Qe={class:"rounded-xl border-[#842ff7] border hover:bg-[#842ff7] hover:text-white mb-2 px-3 py-1 transition duration-100"},Xe={class:"w-full"},et=$({__name:"flow-list",setup(t){const l=E();return(r,s)=>{const o=C("font-awesome-icon"),y=Z,m=q,f=ue,d=J;return i(),a("div",Ze,[u(d,{"id-name":"flow-list",class:"w-full"},{default:g(()=>[e("div",Ye,[s[1]||(s[1]=e("p",{class:"mb-3"}," Flowリスト ",-1)),u(m,{class:""},{button:g(()=>[e("button",Qe,[u(o,{icon:["fas","plus"],class:""}),s[0]||(s[0]=R(" アイテムを追加 "))])]),modal:g(()=>[u(y,{"flow-item":n(l).masterFlow},null,8,["flow-item"])]),_:1}),e("div",Xe,[u(f,{"flow-item":n(l).masterFlow},null,8,["flow-item"])])])]),_:1})])}}}),tt={class:"w-full h-fit py-4 px-4 flex flex-col justify-start items-center"},ot={class:"rounded-md w-full"},nt={class:"w-full flex items-center justify-start"},lt=["value","onChange"],st=["onUpdate:modelValue"],it=["onClick"],rt={class:"text-red-500 hover:text-red-700 transition-all duration-300"},at=$({__name:"variable-list",setup(t){const l=E(),r=(y,m)=>{l.masterFlow.variables[m]=l.masterFlow.variables[y],delete l.masterFlow.variables[y]},s=(y,m)=>{l.masterFlow.variables[y]=m},o=y=>{delete l.masterFlow.variables[y]};return(y,m)=>{const f=C("font-awesome-icon"),d=J;return i(),a("div",tt,[u(d,{"id-name":"variable-list",class:"w-full"},{default:g(()=>[e("div",ot,[e("div",nt,[m[1]||(m[1]=e("p",{class:"mr-2"}," 変数 ",-1)),e("button",{onClick:m[0]||(m[0]=v=>s("","")),class:"text-xs text-[#842ff7] hover:bg-[#842ff7] active:bg-purple-900 hover:text-white transition-all duration-200 aspect-square px-1 border border-[#842ff7] rounded-full flex justify-center items-center"},[u(f,{icon:["fas","plus"]})])]),(i(!0),a(M,null,F(n(l).masterFlow.variables,(v,h,p)=>(i(),a("div",{key:h,class:"mt-1 flex items-center justify-center w-full"},[e("input",{value:h,onChange:w=>r(h,w.target.value),type:"text",placeholder:"key",class:"mr-1 px-2 focus:bg-white duration-300 transition-all bg-transparent rounded-md border-gray-300 outline-none w-full"},null,40,lt),I(e("input",{type:"text","onUpdate:modelValue":w=>n(l).masterFlow.variables[h]=w,class:"mr-1 px-2 duration-300 transition-all rounded-md border-gray-300 outline-none w-full"},null,8,st),[[V,n(l).masterFlow.variables[h]]]),e("button",{onClick:w=>o(h),class:"ml-2 mr-1"},[e("p",rt,[u(f,{icon:["fas","minus"]})])],8,it)]))),128))])]),_:1})])}}}),dt={class:"flex items-start justify-start h-full w-full pb-2"},ut={class:"flex flex-col items-center justify-start text-2xl border-r border-gray-300 h-full mr-2 px-2 w-[96px]"},ct={class:"relative flex flex-col items-center justify-center w-[calc(100%-96px)] h-full max-h-full"},mt=$({__name:"side-menu",setup(t){const l=A();return(r,s)=>{const o=C("font-awesome-icon"),y=et,m=at,f=de,d=Ae;return i(),O(d,null,{default:g(()=>[e("div",dt,[e("div",ut,[e("button",{onClick:s[0]||(s[0]=v=>n(l).setSideMenuStatus("Flow List")),class:j(["p-2 w-full mb-2 flex flex-col items-center justify-center rounded-lg transition-all duration-150",n(l).getSideMenuStatus()==="Flow List"?"bg-[#e5daf3] text-[#862ff7] font-bold":"hover:bg-[#e5daf3] text-gray-500 scale-90 hover:scale-100"])},[u(o,{icon:["far","chart-bar"]}),s[2]||(s[2]=e("p",{class:"text-xs mt-2"}," Flowリスト ",-1))],2),e("button",{onClick:s[1]||(s[1]=v=>n(l).setSideMenuStatus("Variable List")),class:j(["p-2 w-full mb-2 flex flex-col items-center justify-center rounded-lg transition-all duration-150",n(l).getSideMenuStatus()==="Variable List"?"bg-[#e5daf3] text-[#862ff7] font-bold":"hover:bg-[#e5daf3] text-gray-500 scale-90 hover:scale-100"])},s[3]||(s[3]=[e("div",{class:"font-normal"}," {{x}} ",-1),e("p",{class:"text-xs mt-2"}," 変数 ",-1)]),2)]),e("div",ct,[u(f,{class:"max-h-full pl-2 rounded-lg w-full"},{default:g(()=>[I(u(y,{class:"w-full"},null,512),[[H,n(l).getSideMenuStatus()==="Flow List"]]),I(u(m,{class:"w-full"},null,512),[[H,n(l).getSideMenuStatus()==="Variable List"]])]),_:1})])])]),_:1})}}}),ft={},pt={class:"group/history overflow-hidden hover:bg-gray-200 rounded-xl transition-all duration-300 py-2 px-3 flex flex-col items-center justify-center"},yt={class:"flex items-center justify-center"},xt={class:""};function vt(t,l){return i(),a("button",pt,[e("div",yt,[e("div",xt,[P(t.$slots,"default"),l[0]||(l[0]=e("div",{class:"group-hover/history:bg-[#842ff7] w-0 group-hover/history:w-full opacity-100 h-[2px] rounded-md transition-all duration-500"},null,-1))])])])}const gt=ke(ft,[["render",vt]]),wt={class:"pl-4 border-l-2 border-[#842ff7] w-full"},bt={class:"grid grid-cols-12 gap-2 w-full"},ht={class:"col-span-7"},It={class:"flex justify-end items-center h-full"},$t={class:"flex-grow h-full"},_t={key:1,class:"flex justify-start items-center h-full"},kt=["type"],jt={class:"text-red-500 hover:text-red-700 transition-all duration-300"},St={key:0,class:"pl-4"},ce=$({__name:"request-parameter-editor",props:{modelValue:{}},emits:["update:modelValue","remove"],setup(t,{emit:l}){const r=t,s=l,o=L({get:()=>r.modelValue,set:f=>s("update:modelValue",f)}),y=()=>{o.value.children||(o.value.children=[]),o.value.children.push({key:"",type:"string",value:""})},m=f=>{o.value.children?.splice(f,1)};return B(()=>o.value.type,f=>{f==="object"||f==="array"?(o.value.value=void 0,o.value.children||(o.value.children=[])):(o.value.children=void 0,o.value.value="")}),(f,d)=>{const v=C("font-awesome-icon"),h=ce;return i(),a("div",wt,[e("div",bt,[I(e("input",{"onUpdate:modelValue":d[0]||(d[0]=p=>n(o).key=p),placeholder:"キー",class:"col-span-3 px-2 outline-none rounded border bg-white focus:bg-white"},null,512),[[V,n(o).key]]),I(e("select",{"onUpdate:modelValue":d[1]||(d[1]=p=>n(o).type=p),class:"col-span-2 px-2 outline-none rounded border bg-white focus:bg-white"},d[5]||(d[5]=[je('<option value="string">文字列</option><option value="number">数値</option><option value="boolean">真偽値</option><option value="object">オブジェクト</option><option value="array">配列</option>',5)]),512),[[N,n(o).type]]),e("div",ht,[e("div",It,[e("div",$t,[n(o).type==="boolean"?I((i(),a("select",{key:0,"onUpdate:modelValue":d[2]||(d[2]=p=>n(o).value=p),class:"w-full px-2 outline-none rounded border h-full"},d[6]||(d[6]=[e("option",{value:!0},"true",-1),e("option",{value:!1},"false",-1)]),512)),[[N,n(o).value]]):n(o).type==="object"||n(o).type==="array"?(i(),a("div",_t,[d[7]||(d[7]=e("p",{class:"mr-2"}," 子要素 ",-1)),e("button",{onClick:y,class:"text-xs text-[#842ff7] hover:bg-[#842ff7] active:bg-purple-900 hover:text-white transition-all duration-200 aspect-square px-1 border border-[#842ff7] rounded-full flex justify-center items-center"},[u(v,{icon:["fas","plus"]})])])):I((i(),a("input",{key:2,"onUpdate:modelValue":d[3]||(d[3]=p=>n(o).value=p),type:n(o).type==="number"?"number":"text",class:"w-full h-full px-2 py-1 outline-none rounded border bg-white focus:bg-white"},null,8,kt)),[[Se,n(o).value]])]),e("button",{onClick:d[4]||(d[4]=p=>f.$emit("remove")),class:"ml-2 mr-1"},[e("p",jt,[u(v,{icon:["fas","minus"]})])])])])]),n(o).children&&n(o).children.length>0?(i(),a("div",St,[(i(!0),a(M,null,F(n(o).children,(p,w)=>(i(),a("div",{key:w},[u(h,{"model-value":p,onRemove:x=>m(w)},null,8,["model-value","onRemove"])]))),128))])):b("",!0)])}}}),Mt={class:"flex items-center justify-start mb-2"},Ct={class:"flex items-center justify-start"},Vt={class:"flex flex-col"},At={key:0,class:"flex items-center justify-start mt-4 mb-2"},Et={class:"flex items-center justify-start"},Ft={class:"flex flex-col"},Rt=$({__name:"form-editor",props:{apiItem:{type:Object,default:0}},setup(t){const l=E();return(r,s)=>{const o=C("font-awesome-icon"),y=ce;return i(),a(M,null,[e("div",Mt,[s[2]||(s[2]=e("p",{class:"mr-2"}," headers ",-1)),e("button",{onClick:s[0]||(s[0]=m=>n(l).addHeader(t.apiItem)),class:"text-xs text-[#842ff7] hover:bg-[#842ff7] active:bg-purple-900 hover:text-white transition-all duration-200 aspect-square px-1 border border-[#842ff7] rounded-full flex justify-center items-center"},[u(o,{icon:["fas","plus"]})])]),e("div",Ct,[e("div",Vt,[(i(!0),a(M,null,F(t.apiItem.headers,(m,f)=>(i(),a("div",{key:f},[u(y,{"model-value":m,onRemove:d=>n(l).removeHeader(t.apiItem,f)},null,8,["model-value","onRemove"])]))),128))])]),t.apiItem.method!=="GET"?(i(),a("div",At,[s[3]||(s[3]=e("p",{class:"mr-2"}," body ",-1)),e("button",{onClick:s[1]||(s[1]=m=>n(l).addBodyParam(t.apiItem)),class:"text-xs text-[#842ff7] hover:bg-[#842ff7] active:bg-purple-900 hover:text-white transition-all duration-200 aspect-square px-1 border border-[#842ff7] rounded-full flex justify-center items-center"},[u(o,{icon:["fas","plus"]})])])):b("",!0),e("div",Et,[e("div",Ft,[(i(!0),a(M,null,F(t.apiItem.body,(m,f)=>(i(),a("div",{key:f},[u(y,{"model-value":m,onRemove:d=>n(l).removeBodyParam(t.apiItem,f)},null,8,["model-value","onRemove"])]))),128))])])],64)}}}),Q=$({__name:"MonacoEditor.client",props:{lang:{default:()=>"plaintext"},options:{default:()=>({})},modelUri:{},modelValue:{default:()=>""}},emits:["update:modelValue","load"],setup(t,{expose:l,emit:r}){const s=t,o=r,y=k(!0),m=L(()=>s.lang||s.options.language),f=Me(),d=k(),v=Ce(),h={automaticLayout:!0};let p,w;return B(()=>s.modelValue,()=>{p?.getValue()!==s.modelValue&&p?.setValue(s.modelValue)}),B(()=>[s.lang,s.modelUri],()=>{w&&w.dispose(),w=v.editor.createModel(s.modelValue,m.value,s.modelUri),p?.setModel(w)}),B(()=>s.options,()=>{p?.updateOptions(te(s.options,h))}),B(d,(x,c)=>{!d.value||c||(p=v.editor.create(d.value,te(s.options,h)),w=v.editor.createModel(s.modelValue,m.value,s.modelUri),f.value=p,p.layout(),p.setModel(w),p.onDidChangeModelContent(()=>{o("update:modelValue",p.getValue())}),y.value=!1,o("load",p))}),l({$editor:f}),se(()=>{p?.dispose(),w?.dispose()}),(x,c)=>(i(),a("div",{ref_key:"editorElement",ref:d},[y.value?P(x.$slots,"default",{key:0}):b("",!0)],512))}}),oe=Y(Q),Ot={class:"h-full"},Tt={class:"rounded-lg bg-white overflow-hidden py-4 mb-4"},Ut={class:"rounded-lg bg-white overflow-hidden py-8"},Bt={key:0,class:"rounded-lg bg-white overflow-hidden py-4"},Dt={class:"rounded-lg bg-white overflow-hidden py-8"},Lt=$({__name:"code-editor",props:{apiItem:{type:Object,default:0}},setup(t){const l=t;E();const r=T(),s=k(""),o=k(""),y=d=>{try{return JSON.stringify(d,null,2)}catch{return JSON.stringify(d)}};s.value=y(r.reverseTransformToRequestParameterArray(l.apiItem.headers)),o.value=y(r.reverseTransformToRequestParameterArray(l.apiItem.body));const m=()=>{try{l.apiItem.headers=r.transformEntriesArray(JSON.parse(s.value)),console.log("called setHeadersValueToStore")}catch(d){console.error(d.message)}},f=()=>{try{console.log("called setBodyValueToStore"),l.apiItem.body=r.transformEntriesArray(JSON.parse(o.value))}catch(d){console.error(d.message)}};return W(()=>{}),(d,v)=>{const h=oe,p=oe;return i(),a("div",Ot,[e("div",Tt,[v[2]||(v[2]=e("p",{class:"px-2 ml-2 mb-2"}," ヘッダー ",-1)),e("div",Ut,[u(h,{modelValue:n(s),"onUpdate:modelValue":v[0]||(v[0]=w=>D(s)?s.value=w:null),onFocusout:m,lang:"json",options:{scrollbar:{alwaysConsumeMouseWheel:!1}},class:"h-64"},null,8,["modelValue"])])]),t.apiItem.method!=="GET"?(i(),a("div",Bt,[v[3]||(v[3]=e("p",{class:"px-2 ml-2 mb-2"}," ボディ ",-1)),e("div",Dt,[u(p,{modelValue:n(o),"onUpdate:modelValue":v[1]||(v[1]=w=>D(o)?o.value=w:null),onFocusout:f,lang:"json",options:{scrollbar:{alwaysConsumeMouseWheel:!1}},class:"h-64"},null,8,["modelValue"])])])):b("",!0)])}}}),Pt={class:"flex flex-col items-start justify-center bg-white backdrop-blur-md bg-opacity-50 border-gray-300 border rounded-lg p-2"},Nt={class:"flex mb-1 items-center justify-center"},zt={key:0},qt={key:1},Wt={class:"flex flex-col items-start justify-start overflow-auto bg-gray-50 relative w-[90vw] max-h-[90vh] text-xs"},Jt={key:0,class:"p-4 rounded w-full"},Gt={key:1,class:"p-4 rounded w-full"},Ht=$({__name:"result-card",props:{executionResult:{type:Object,default:0}},setup(t){A(),T();const l=r=>{try{return JSON.stringify(r,null,2)}catch{return r}};return(r,s)=>{const o=$e;return i(),a("div",Pt,[e("div",Nt,[e("p",{class:j([t.executionResult.success?"bg-green-600":"bg-red-600","font-bold text-white px-[6px] rounded mr-1"])},[t.executionResult.success?(i(),a("span",zt,S(t.executionResult.data.status),1)):b("",!0),t.executionResult.success?b("",!0):(i(),a("span",qt,S(t.executionResult.error.status),1))],2),e("p",{class:j([t.executionResult.success?"text-green-600":"text-red-600","font-bold"])},S(t.executionResult.success?"成功":"失敗"),3)]),e("p",null," 実行日時："+S(new Date(t.executionResult.executionDate).toLocaleString()),1),e("p",null," 実行時間："+S(t.executionResult.duration)+" ms ",1),u(o,null,{button:g(()=>s[0]||(s[0]=[e("button",{class:"hover:underline text-blue-600"}," 実行結果を確認する ",-1)])),modal:g(()=>[e("div",Wt,[t.executionResult.success?(i(),a("pre",Jt,S(l(t.executionResult.data)),1)):b("",!0),t.executionResult.success?b("",!0):(i(),a("pre",Gt,S(l(t.executionResult.error)),1))])]),_:1})])}}}),Kt={class:"border-y overflow-hidden transition-all duration-500 py-4 w-full"},Zt=$({__name:"accordion",props:{idName:{type:String,default:""}},setup(t,{expose:l}){const r=k(ae()),s=k(!1),o=()=>{s.value=!s.value};return l({isOpening:s}),(y,m)=>{const f=J;return i(),a("div",Kt,[e("div",{onClick:o},[P(y.$slots,"summary")]),u(f,{"id-name":"acd-"+n(r)},{default:g(()=>[e("div",{class:j([n(s)?"h-fit":"h-0","w-full"])},[P(y.$slots,"detail")],2)]),_:3},8,["id-name"])])}}}),Yt=Y(Q),Qt={key:0},Xt={class:"flex items-center justify-start my-2 w-full rounded-lg border overflow-hidden"},eo={class:"border-r border-gray-200"},to={class:"mt-6 mb-4 w-full flex justify-start items-center"},oo={key:1,class:"flex flex-col items-start justify-start"},no={class:"inline-flex items-center cursor-pointer p-1"},lo={class:"flex flex-col items-start justify-start"},so={key:2,class:"w-full"},io={key:0,class:"flex items-center justify-center p-4"},ro={key:1},ao={key:2,class:"w-full"},uo={class:"flex items-center justify-start mt-2 hover:bg-gray-200 p-2 rounded-md transition duration-150"},co={class:"flex flex-col-reverse items-center justify-center mt-4 w-full"},mo={key:0,class:"w-full"},fo=$({__name:"item",props:{apiItem:{type:Object,default:0}},setup(t){const l=A(),r=T();return(s,o)=>{const y=Rt,m=Lt,f=C("font-awesome-icon"),d=Yt,v=Ht,h=Zt;return i(),a(M,null,[n(l).getItemDisplayMode(t.apiItem)==="default"?(i(),a("div",Qt,[e("div",Xt,[e("div",eo,[I(e("select",{"onUpdate:modelValue":o[0]||(o[0]=p=>t.apiItem.method=p),class:"w-full py-1 px-2 outline-none font-bold",style:ie({color:n(l).methodColor[t.apiItem.method]})},o[7]||(o[7]=[e("option",{class:"bg-white text-[#183153]"},"GET",-1),e("option",{class:"bg-white text-[#183153]"},"POST",-1),e("option",{class:"bg-white text-[#183153]"},"PUT",-1),e("option",{class:"bg-white text-[#183153]"},"DELETE",-1)]),4),[[N,t.apiItem.method]])]),I(e("input",{"onUpdate:modelValue":o[1]||(o[1]=p=>t.apiItem.endpoint=p),placeholder:"endpoint",class:"flex-grow outline-none px-2 py-1"},null,512),[[V,t.apiItem.endpoint]])]),e("div",to,[o[8]||(o[8]=e("p",{class:"mr-6"}," 入力モード ",-1)),e("button",{onClick:o[2]||(o[2]=p=>n(l).setEditModeStatus(t.apiItem.id,"form")),class:j([n(l).getEditModeStatus(t.apiItem.id)==="form"?"bg-[#842ff7]  text-white":"","mr-1 px-3 py-1 rounded-2xl transition-all duration-300"])}," Form ",2),e("button",{onClick:o[3]||(o[3]=p=>n(l).setEditModeStatus(t.apiItem.id,"code")),class:j([n(l).getEditModeStatus(t.apiItem.id)==="code"?"bg-[#842ff7]  text-white  ":"","px-3 py-1 rounded-2xl transition-all duration-300"])}," Raw ",2)]),n(l).getEditModeStatus(t.apiItem.id)==="form"?(i(),O(y,{key:0,"api-item":t.apiItem},null,8,["api-item"])):n(l).getEditModeStatus(t.apiItem.id)==="code"?(i(),O(m,{key:1,"api-item":t.apiItem},null,8,["api-item"])):b("",!0)])):n(l).getItemDisplayMode(t.apiItem)==="script"?(i(),a("div",oo,[e("label",no,[I(e("input",{type:"checkbox","onUpdate:modelValue":o[4]||(o[4]=p=>t.apiItem.isScriptEnabled=p),class:"sr-only peer"},null,512),[[re,t.apiItem.isScriptEnabled]]),o[9]||(o[9]=e("div",{class:"relative w-11 h-6 bg-gray-200 outline-none rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-[#842ff7] hover:ring-1 hover:ring-[#842ff7] transition-all duration-300"},null,-1)),o[10]||(o[10]=e("span",{class:"ms-3 dark:text-gray-300"},"スクリプトを有効にする",-1))]),e("div",{class:j(["flex flex-col items-start justify-center p-2 rounded-lg overflow-hidden w-full transition-all duration-200 relative bg-white z-0",t.apiItem.isScriptEnabled?"":"pointer-events-none"])},[e("div",{class:j(["absolute top-0 left-0 w-full h-full pointer-events-none bg-black z-10 duration-150 transition-all",t.apiItem.isScriptEnabled?"opacity-0":"opacity-10"])},null,2),e("div",lo,[e("button",{onClick:o[5]||(o[5]=p=>n(r).executeScriptApiItem(t.apiItem)),class:"hover:bg-gray-200 px-2 rounded-md transition-all duration-150 mb-4"},[u(f,{icon:["fas","play"]}),o[11]||(o[11]=R(" テスト実行 "))])]),u(d,{modelValue:t.apiItem.script,"onUpdate:modelValue":o[6]||(o[6]=p=>t.apiItem.script=p),lang:"typescript",options:{scrollbar:{alwaysConsumeMouseWheel:!1}},class:"h-72 w-full"},null,8,["modelValue"])],2)])):b("",!0),n(l).getItemDisplayMode(t.apiItem)==="result"?(i(),a("div",so,[n(r).isExecuting?(i(),a("div",io,o[12]||(o[12]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-500"},null,-1)]))):b("",!0),n(l).getExecutionResults(t.apiItem.id).length>0?(i(),a("div",ro,[o[13]||(o[13]=e("p",{class:"font-bold mb-4"}," 最新の実行 ",-1)),u(v,{"execution-result":n(l).getExecutionResults(t.apiItem.id)[n(l).getExecutionResults(t.apiItem.id).length-1]},null,8,["execution-result"])])):b("",!0),n(l).getExecutionResults(t.apiItem.id).length>1?(i(),a("div",ao,[u(h,{"id-name":"result-list"},{summary:g(()=>[e("button",uo,[u(f,{icon:["fas","chevron-down"]}),o[14]||(o[14]=e("p",{class:"font-bold ml-2"}," 過去の実行 ",-1))])]),detail:g(()=>[e("div",co,[(i(!0),a(M,null,F(n(l).getExecutionResults(t.apiItem.id),(p,w)=>(i(),a("div",{key:w,class:"mb-2 w-full"},[w!==n(l).getExecutionResults(t.apiItem.id).length-1?(i(),a("div",mo,[u(v,{"execution-result":p},null,8,["execution-result"])])):b("",!0)]))),128))])]),_:1})])):b("",!0)])):b("",!0)],64)}}}),po={class:"flex flex-col items-start justify-start my-2 w-full overflow-hidden bg-white bg-opacity-50 border-gray-300 border rounded-2xl p-1"},yo={class:"flex justify-center items-center bg-white bg-opacity-50 border-gray-300 border rounded-xl px-2 py-1 mb-2"},xo={key:0},vo={key:1},go={class:"hover:bg-gray-400 px-[6px] py-1 rounded-md transition-all duration-150 flex items-center justify-center"},wo={class:"mr-1"},bo={class:"bg-white rounded-md flex flex-col items-start justify-center"},ho={class:"flex justify-center items-center mb-2"},Io=["value"],$o={class:"flex justify-center items-center bg-white bg-opacity-50 border-gray-300 border rounded-xl px-2 py-1"},_o={key:0},ko={key:1},jo={class:"hover:bg-gray-400 px-[6px] py-1 rounded-md transition-all duration-150 flex items-center justify-center"},So={class:"mr-1"},Mo={class:"bg-white rounded-md flex flex-col items-start justify-center"},X=$({__name:"condition",props:{condition:{type:Object,default:0}},setup(t){const l=k(["&","|","=","!=","<",">",">=","<=","contain"]);A(),T();const r=E();return(s,o)=>{const y=X,m=C("font-awesome-icon"),f=q;return i(),a("div",po,[e("div",yo,[t.condition.leftSide.valueType==="condition"?(i(),a("div",xo,[u(y,{condition:t.condition.leftSide.value},null,8,["condition"])])):(i(),a("div",vo,[I(e("input",{"onUpdate:modelValue":o[0]||(o[0]=d=>t.condition.leftSide.value=d),class:"outline-none",placeholder:"値を入力してください"},null,512),[[V,t.condition.leftSide.value]])])),u(f,null,{button:g(()=>[e("button",go,[e("p",wo,S(t.condition.leftSide.valueType),1),u(m,{icon:["fas","chevron-down"]})])]),modal:g(()=>[e("div",bo,[e("button",{onClick:o[1]||(o[1]=d=>n(r).changeConditionType(t.condition,"condition","left")),class:"px-2 py-2 hover:bg-gray-200 rounded-lg mr-2 flex justify-start items-center transition-all duration-300 w-full"},o[11]||(o[11]=[e("p",{class:"max-xl:hidden ml-2"}," 条件分岐をネスト ",-1)])),e("button",{onClick:o[2]||(o[2]=d=>n(r).changeConditionType(t.condition,"string","left")),class:"px-2 py-2 hover:bg-gray-200 rounded-lg mr-2 flex justify-start items-center transition-all duration-300 w-full"},o[12]||(o[12]=[e("p",{class:"max-xl:hidden ml-2"}," 文字列 ",-1)])),e("button",{onClick:o[3]||(o[3]=d=>n(r).changeConditionType(t.condition,"number","left")),class:"px-2 py-2 hover:bg-gray-200 rounded-lg mr-2 flex justify-start items-center transition-all duration-300 w-full"},o[13]||(o[13]=[e("p",{class:"max-xl:hidden ml-2"}," 数値 ",-1)])),e("button",{onClick:o[4]||(o[4]=d=>n(r).resetCondition(t.condition)),class:"px-2 py-2 hover:bg-gray-200 text-red-500 rounded-lg mr-2 flex justify-start items-center transition-all duration-300 w-full"},o[14]||(o[14]=[e("p",{class:"max-xl:hidden ml-2"}," 条件をリセット ",-1)]))])]),_:1})]),e("div",ho,[I(e("select",{"onUpdate:modelValue":o[5]||(o[5]=d=>t.condition.comparisonOperator=d),class:"flex justify-center items-center px-2 py-1 outline-none rounded border text-center"},[(i(!0),a(M,null,F(n(l),(d,v)=>(i(),a("option",{value:d,key:v,class:"flex justify-center items-center"},S(d),9,Io))),128))],512),[[N,t.condition.comparisonOperator]])]),e("div",$o,[t.condition.rightSide.valueType==="condition"?(i(),a("div",_o,[u(y,{condition:t.condition.rightSide.value},null,8,["condition"])])):(i(),a("div",ko,[I(e("input",{"onUpdate:modelValue":o[6]||(o[6]=d=>t.condition.rightSide.value=d),class:"outline-none",placeholder:"値を入力してください"},null,512),[[V,t.condition.rightSide.value]])])),u(f,null,{button:g(()=>[e("button",jo,[e("p",So,S(t.condition.rightSide.valueType),1),u(m,{icon:["fas","chevron-down"]})])]),modal:g(()=>[e("div",Mo,[e("button",{onClick:o[7]||(o[7]=d=>n(r).changeConditionType(t.condition,"condition","right")),class:"px-2 py-2 hover:bg-gray-200 rounded-lg mr-2 flex justify-start items-center transition-all duration-300 w-full"},o[15]||(o[15]=[e("p",{class:"max-xl:hidden ml-2"}," 条件分岐をネスト ",-1)])),e("button",{onClick:o[8]||(o[8]=d=>n(r).changeConditionType(t.condition,"string","right")),class:"px-2 py-2 hover:bg-gray-200 rounded-lg mr-2 flex justify-start items-center transition-all duration-300 w-full"},o[16]||(o[16]=[e("p",{class:"max-xl:hidden ml-2"}," 文字列 ",-1)])),e("button",{onClick:o[9]||(o[9]=d=>n(r).changeConditionType(t.condition,"number","right")),class:"px-2 py-2 hover:bg-gray-200 rounded-lg mr-2 flex justify-start items-center transition-all duration-300 w-full"},o[17]||(o[17]=[e("p",{class:"max-xl:hidden ml-2"}," 数値 ",-1)])),e("button",{onClick:o[10]||(o[10]=d=>n(r).resetCondition(t.condition)),class:"px-2 py-2 hover:bg-gray-200 text-red-500 rounded-lg mr-2 flex justify-start items-center transition-all duration-300 w-full"},o[18]||(o[18]=[e("p",{class:"max-xl:hidden ml-2"}," 条件をリセット ",-1)]))])]),_:1})])])}}}),Co={class:"flex flex-col items-center justify-start my-2 rounded-lg"},Vo=$({__name:"item",props:{conditionItem:{type:Object,default:0}},setup(t){return A(),T(),E(),(l,r)=>{const s=X;return i(),a("div",Co,[u(s,{condition:t.conditionItem.condition},null,8,["condition"])])}}}),Ao={class:"flex flex-col items-start justify-start my-2 rounded-lg"},Eo={class:"flex items-center justify-center"},Fo={key:0,class:"mt-4"},Ro=$({__name:"item",props:{loopItem:{type:Object,default:0}},setup(t){return A(),ne(),T(),(l,r)=>{const s=X;return i(),a("div",Ao,[e("div",Eo,[r[2]||(r[2]=e("p",{class:"mr-2"}," タイプ ",-1)),I(e("select",{"onUpdate:modelValue":r[0]||(r[0]=o=>t.loopItem.loopType=o),class:"py-1 px-2 outline-none rounded-lg"},r[1]||(r[1]=[e("option",{class:"bg-white text-[#183153]"},"while",-1)]),512),[[N,t.loopItem.loopType]])]),t.loopItem.loopType==="while"?(i(),a("div",Fo,[r[3]||(r[3]=e("p",{class:""}," 条件 ",-1)),u(s,{condition:t.loopItem.condition},null,8,["condition"])])):b("",!0)])}}}),Oo=Y(Q),To={class:"flex flex-col items-start justify-start my-2 rounded-lg w-full"},Uo={class:"flex flex-col items-start justify-start w-full"},Bo={class:"flex flex-col items-start justify-center p-2 rounded-lg overflow-hidden w-full transition-all duration-200 relative bg-white z-0"},Do={class:"flex flex-col items-start justify-start w-full"},Lo=$({__name:"item",props:{scriptItem:{type:Object,default:0}},setup(t){A(),ne();const l=T();return(r,s)=>{const o=C("font-awesome-icon"),y=Oo;return i(),a("div",To,[e("div",Uo,[e("div",Bo,[e("div",Do,[e("button",{onClick:s[0]||(s[0]=m=>n(l).executeScript(t.scriptItem)),class:"hover:bg-gray-200 px-2 rounded-md transition-all duration-150 mb-4"},[u(o,{icon:["fas","play"]}),s[2]||(s[2]=R(" テスト実行 "))])]),u(y,{modelValue:t.scriptItem.script,"onUpdate:modelValue":s[1]||(s[1]=m=>t.scriptItem.script=m),lang:"json",options:{scrollbar:{alwaysConsumeMouseWheel:!1}},class:"h-72 w-full"},null,8,["modelValue"])])])])}}}),Po={class:"flex flex-col items-start justify-start my-2 rounded-lg"},No=$({__name:"item",props:{endItem:{type:Object,default:0}},setup(t){return(l,r)=>(i(),a("div",Po))}}),zo={class:"flex flex-col items-start justify-start my-2 rounded-lg"},qo={class:"flex"},Wo=$({__name:"item",props:{waitItem:{type:Object,default:0}},setup(t){return(l,r)=>(i(),a("div",zo,[r[2]||(r[2]=e("p",{class:"mb-2"}," 待機時間 ",-1)),e("div",qo,[I(e("input",{"onUpdate:modelValue":r[0]||(r[0]=s=>t.waitItem.waitTime=s),type:"number",placeholder:"待機時間を入力してください",class:"mr-1 px-2 focus:bg-white duration-300 transition-all bg-transparent rounded-md border-gray-300 outline-none w-full"},null,512),[[V,t.waitItem.waitTime]]),r[1]||(r[1]=e("p",null," ms ",-1))])]))}}),Jo="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%20-960%20960%20960'%20width='24px'%20fill='%23183153'%3e%3cpath%20d='M360-272.31v-415.38L686.15-480%20360-272.31ZM400-480Zm0%20134%20211.54-134L400-614v268Z'/%3e%3c/svg%3e",Go={key:0,class:"w-full"},Ho={class:"flex items-center justify-center"},Ko={class:"flex items-center justify-start flex-grow ml-2"},Zo={key:0,class:"flex flex-col items-center justify-center text-xs px-2 py-1 w-64"},Yo={key:1,class:"flex flex-col items-start justify-center px-2 py-1 w-64"},Qo={class:"w-full flex justify-center items-center"},Xo={class:"pr-2 py-1 flex items-center justify-center h-full"},en={class:"inline-flex items-center cursor-pointer mt-1 mr-2 p-1"},tn={class:"text-red-500 text-lg hover:text-red-700 transition-all duration-200"},on={class:"flex w-full justify-start items-center mb-4 px-2"},nn={key:0,class:"shadow rounded-md p-4 w-full mx-auto bg-white"},ln={key:1},sn={key:0},rn={key:1},an={key:2},dn={key:3},un={key:4},cn={key:5},mn={class:"rounded-xl border-[#842ff7] border hover:bg-[#842ff7] hover:text-white px-3 py-1 transition duration-100 mb-2"},me=$({__name:"item",props:{flowItem:{type:Object,required:!0}},setup(t){const l=E(),r=A(),s=T(),o=t,y=k(null);k(null);function m(x){x&&x.changeVisibility()}const f=k(""),d=L(()=>`
        # 前提
            APIフロー作成アプリについて、フローアイテムのデータを自動的に生成することを手伝っていただきたいです。
            下記の型構造(ApiItem)のデータをお送りしますので、指示に合わせて、修正したデータのみを返却してください。（json形式で、それ以外の文字列は返答しないでください）
            import { type FlowItem } from '~/types/item/flow';

            export type ApiItem = FlowItem & {
                endpoint: string;
                method: Method;
                headers: RequestParameter[];
                body: RequestParameter[];
                script: string;
                isScriptEnabled: boolean;
            }

            export type RequestParameter = {
                key?: string;
                type: 'string' | 'number' | 'boolean' | 'object' | 'array';
                value: any;
                children?: RequestParameter[];
            }

            export type Method = 'GET' | 'POST' | 'PUT' | 'DELETE'

            参考
            export type FlowItem = {
            id: string;
            name: string;
            type: 'flow'|'api'|'condition'|'loop'|'script'|'end'|'wait';
            description: string;
            isItemActive: boolean;
            variables: {};
            executionResults: ExecutionResult[];
            flowItems: FlowItem[];
            }

            scriptに記載したスクリプトは、APIの実行後に実行されます。
            フローの変数を使用したいときはscript内でvariables[\${キー名}]を使用できます。
            また、実行結果を利用したい場合は、script内でresult.data.data　でアクセスできます。
            例えば、APIの実行結果を保持したい場合はvariables['result'] = result.data.data.保持したいプロパティ のようにすることで、保持できます。

        # 指示
            下記のデータについて、${f.value}
            ${JSON.stringify(o.flowItem)}
        
    `),v=L(()=>`
        # 前提
            APIフロー作成アプリについて、フローアイテムのデータを自動的に生成することを手伝っていただきたいです。
            下記の型構造(ScriptItem)のデータをお送りしますので、指示に合わせて、修正したデータのみを返却してください。（json形式で、それ以外の文字列は返答しないでください）
            import { type FlowItem } from '~/types/item/flow';

            export type ScriptItem = FlowItem & {
                script: string;
            }


            参考
            export type FlowItem = {
            id: string;
            name: string;
            type: 'flow'|'api'|'condition'|'loop'|'script'|'end'|'wait';
            description: string;
            isItemActive: boolean;
            variables: {};
            executionResults: ExecutionResult[];
            flowItems: FlowItem[];
            }

            scriptはtype scriptの形式でお願いします。
            フローの変数を使用したいときはvariables[\${キー名}]を使用できます。
            例えば、variables['result'] = 'test'のようにすることで、保持できます。
            ※FlowItem内のvariablesプロパティは無視してください。

        # 指示
            下記のデータについて、${f.value}
            ${JSON.stringify(o.flowItem)}
        
    `),h=k(""),p=()=>{l.masterFlow.variables.openAiApiKey=h.value},w=async()=>{r.setIsGenerating(o.flowItem.id,!0);try{if(o.flowItem.type==="api"){console.log(d.value);const x=await l.generateFlowItem(d.value);console.log(JSON.stringify(x)),l.changeFlowItemById(o.flowItem.id,JSON.parse(x.value?.choices[0].message?.content))}else if(o.flowItem.type==="script"){console.log(v.value);const x=await l.generateFlowItem(v.value);console.log(JSON.stringify(x)),l.changeFlowItemById(o.flowItem.id,JSON.parse(x.value?.choices[0].message?.content))}}catch(x){throw new Error(x.message)}finally{r.setIsGenerating(o.flowItem.id,!1)}};return(x,c)=>{const U=K,z=C("font-awesome-icon"),G=gt,ee=q,fe=fo,pe=Vo,ye=Ro,xe=Lo,ve=No,ge=Wo,we=Z,be=me,he=J;return i(),a("div",{class:j(["py-1 px-2 rounded-xl mt-1 mb-1 overflow-hidden transition-all duration-150",[t.flowItem.isItemActive?"bg-[#f2f3f5]":"bg-gray-300 ",n(r).focusedItemId===t.flowItem.id?"outline outline-2 outline-blue-500":"outline outline-1 outline-gray-300"]]),onClick:c[11]||(c[11]=le(_=>n(r).setFocusedItemId(t.flowItem.id),["stop"]))},[u(he,{"id-name":"dynmcwrpr_"+t.flowItem.id},{default:g(()=>[t.flowItem?(i(),a("div",Go,[e("div",Ho,[u(U,{"item-type":t.flowItem.type,rounded:!0},null,8,["item-type"]),e("div",Ko,[I(e("input",{"onUpdate:modelValue":c[0]||(c[0]=_=>t.flowItem.name=_),type:"text",placeholder:"Untitled",class:"px-2 focus:bg-white duration-300 transition-all bg-transparent rounded-md border-gray-300 outline-none w-full"},null,512),[[V,t.flowItem.name]])]),e("div",null,[u(ee,{ref_key:"modalButton",ref:y,"close-on-click":!1,"modal-possition-horizonal":"right"},{modal:g(()=>[n(l).isApiTokenRegistered()?(i(),a("div",Zo,[c[13]||(c[13]=e("h1",{class:"mb-2"},null,-1)),I(e("textarea",{"onUpdate:modelValue":c[1]||(c[1]=_=>D(f)?f.value=_:null),class:"outline-none border rounded-sm mb-2 w-full border-none resize-none hover:resize-y",style:{fieldSizing:"content"},placeholder:"指示を入力してください"},"                  ",512),[[V,n(f)]]),u(G,{onClick:c[2]||(c[2]=_=>[w(),m(n(y))])},{default:g(()=>[u(z,{icon:["fas","wand-sparkles"]}),c[12]||(c[12]=R(" 生成 "))]),_:1})])):(i(),a("div",Yo,[c[15]||(c[15]=e("p",{class:"mb-2"}," Open AIのAPI Tokenを登録してください ",-1)),I(e("input",{placeholder:"API Token","onUpdate:modelValue":c[3]||(c[3]=_=>D(h)?h.value=_:null),class:"mb-2 px-2 outline-none"},null,512),[[V,n(h)]]),e("div",Qo,[u(G,{onClick:c[4]||(c[4]=_=>[p()])},{default:g(()=>c[14]||(c[14]=[R(" 登録 ")])),_:1})])]))]),button:g(()=>[u(G,null,{default:g(()=>[u(z,{icon:["fas","wand-sparkles"]}),c[16]||(c[16]=R(" 生成 "))]),_:1})]),_:1},512)]),e("div",Xo,[e("button",{onClick:c[5]||(c[5]=_=>{n(s).runFlow(t.flowItem),n(r).setItemDisplayMode(t.flowItem,"result")}),class:j([t.flowItem.isItemActive?"":"pointer-events-none opacity-40","group overflow-hidden hover:bg-white rounded-xl transition-all duration-300 px-2 flex flex-col items-center justify-center"])},c[17]||(c[17]=[e("div",{class:"flex items-center justify-center"},[e("img",{src:Jo,class:"w-8"}),e("div",{class:"mr-4"},[R(" 実行 "),e("div",{class:"w-0 group-hover:w-full opacity-0 group-hover:opacity-100 h-[2px] rounded-md bg-[#842ff7] transition-all duration-500"})])],-1)]),2)]),e("label",en,[I(e("input",{type:"checkbox","onUpdate:modelValue":c[6]||(c[6]=_=>t.flowItem.isItemActive=_),class:"sr-only peer"},null,512),[[re,t.flowItem.isItemActive]]),c[18]||(c[18]=e("div",{class:"relative w-11 h-6 bg-gray-200 outline-none rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-[#842ff7] hover:ring-1 hover:ring-[#842ff7] transition-all duration-300"},null,-1))]),e("button",{onClick:c[7]||(c[7]=_=>n(l).removeFlowItemById(t.flowItem.id)),class:"px-2 m-1"},[e("p",tn,[u(z,{icon:["fas","xmark"]})])])]),e("div",on,[e("button",{onClick:c[8]||(c[8]=_=>n(r).setItemDisplayMode(t.flowItem,"default")),class:"mr-4 flex flex-col items-center justify-center"},[c[19]||(c[19]=e("p",null," リクエスト ",-1)),e("div",{class:j([n(r).getItemDisplayMode(t.flowItem)=="default"?" opacity-100":" opacity-0","w-full h-[1px] bg-[#842ff7] rounded-md transition-all duration-500"])},null,2)]),e("button",{onClick:c[9]||(c[9]=_=>n(r).setItemDisplayMode(t.flowItem,"script")),class:"mr-4 flex flex-col items-center justify-center"},[c[20]||(c[20]=e("p",null," スクリプト ",-1)),e("div",{class:j([n(r).getItemDisplayMode(t.flowItem)=="script"?" opacity-100":" opacity-0","w-full h-[1px] bg-[#842ff7] rounded-md transition-all duration-500"])},null,2)]),e("button",{onClick:c[10]||(c[10]=_=>n(r).setItemDisplayMode(t.flowItem,"result")),class:"mr-4 flex flex-col items-center justify-center"},[c[21]||(c[21]=e("p",null," 実行結果 ",-1)),e("div",{class:j([n(r).getItemDisplayMode(t.flowItem)=="result"?" opacity-100":" opacity-0","w-full h-[1px] bg-[#842ff7] rounded-md transition-all duration-500"])},null,2)])]),n(r).getIsGenerating(t.flowItem.id)?(i(),a("div",nn,c[22]||(c[22]=[e("div",{class:"animate-pulse flex space-x-4 w-full"},[e("div",{class:"flex-1 space-y-6 py-1"},[e("div",{class:"h-2 bg-slate-200 rounded"}),e("div",{class:"space-y-3"},[e("div",{class:"grid grid-cols-3 gap-4"},[e("div",{class:"h-2 bg-slate-200 rounded col-span-2"}),e("div",{class:"h-2 bg-slate-200 rounded col-span-1"})]),e("div",{class:"h-2 bg-slate-200 rounded"})])])],-1)]))):(i(),a("div",ln,[t.flowItem.type=="api"?(i(),a("div",sn,[u(fe,{"api-item":t.flowItem},null,8,["api-item"])])):b("",!0),t.flowItem.type=="condition"?(i(),a("div",rn,[u(pe,{"condition-item":t.flowItem},null,8,["condition-item"])])):b("",!0),t.flowItem.type=="loop"?(i(),a("div",an,[u(ye,{"loop-item":t.flowItem},null,8,["loop-item"])])):b("",!0),t.flowItem.type=="script"?(i(),a("div",dn,[u(xe,{"script-item":t.flowItem},null,8,["script-item"])])):b("",!0),t.flowItem.type=="end"?(i(),a("div",un,[u(ve,{"end-item":t.flowItem},null,8,["end-item"])])):b("",!0),t.flowItem.type=="wait"?(i(),a("div",cn,[u(ge,{"wait-item":t.flowItem},null,8,["wait-item"])])):b("",!0)])),u(ee,{class:"mt-4"},{button:g(()=>[e("button",mn,[u(z,{icon:["fas","plus"],class:""}),c[23]||(c[23]=R(" 子アイテムを追加 "))])]),modal:g(()=>[u(we,{"flow-item":t.flowItem},null,8,["flow-item"])]),_:1}),(i(!0),a(M,null,F(t.flowItem.flowItems,(_,vn)=>(i(),a("div",{key:_.id},[u(be,{"flow-item":_},null,8,["flow-item"])]))),128))])):b("",!0)]),_:1},8,["id-name"])],2)}}}),fn={key:0,class:"flex items-start justify-center w-full h-full text-[#183153]"},pn={class:"flex items-start justify-center w-full h-full"},yn={class:"h-full"},xn={class:"w-full h-full flex-grow relative"},Sn=$({__name:"index",async setup(t){let l,r;const s=E(),o=A(),y=Ee(),m=([l,r]=Ve(()=>y.isLoggedIn()),l=await l,r(),l);return W(async()=>{m||(window.location.href="/login")}),(f,d)=>{const v=Ue,h=mt,p=me,w=de;return n(m)?(i(),a("div",fn,[n(o).getViewMode()==="Flow"?(i(),O(v,{key:0,flowItem:n(s).masterFlow},null,8,["flowItem"])):b("",!0),I(e("div",pn,[e("div",yn,[u(h)]),e("div",xn,[u(w,{class:"max-h-full px-2 rounded-lg flex flex-col","bg-color":"none"},{default:g(()=>[(i(!0),a(M,null,F(n(s).masterFlow.flowItems,(x,c)=>(i(),a("div",{key:x.id,class:"flex flex-col items-center justify-center"},[u(p,{"flow-item":x,class:"w-full"},null,8,["flow-item"])]))),128))]),_:1})])],512),[[H,n(o).getViewMode()==="Laboratory"]])])):b("",!0)}}});export{Sn as default};
